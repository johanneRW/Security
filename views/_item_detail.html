%import utils
% import variables

<div id="item_{{item['item_pk']}}" class="item">

    <form id="frm_item_{{item['item_pk']}}" enctype="multipart/form-data">

        <label for="item_name">Item Name:</label>
        <input name="item_name" value="{{item['item_name']}}" >

        <label for="item_splash_image">Splash Image:</label>
        <input type="file" name="item_splash_image" accept="image/*">
        <div>
            <strong>Current Splash Image:</strong>
            <img src="images/{{item['item_splash_image']}}" alt="Splash Image" style="max-width: 100px; max-height: 100px;">
            <input type="hidden" name="current_splash_image" value="{{item['item_splash_image']}}">
        </div>


        <label for="item_lat">Latitude:</label>
        <input name="item_lat" value="{{item['item_lat']}}" mix-check="{{variables.ITEM_LATLON_REGEX}}">

        <label for="item_lon">Longitude:</label>
        <input name="item_lon" value="{{item['item_lon']}}" mix-check="{{variables.ITEM_LATLON_REGEX}}">

        <label for="item_price_per_night">Price Per Night:</label>
        <input name="item_price_per_night" type="number" value="{{item['item_price_per_night']}}" mix-check="{{variables.ITEM_PRICE_REGEX}}">

        <label for="item_images">Additional Images (at least 3):</label>
        <input type="file" name="item_images" accept="image/*" multiple>
        <div>
        <strong>Current Additional Images:</strong>
        <ul>
            % for image in item['additional_images']:
                <li>
                    <img src="images/{{image}}" alt="Additional Image" style="max-width: 100px; max-height: 100px;">
                        <input type="hidden" name="current_additional_images" value="{{image}}">
                </li>
            % end
        </ul>
        </div>


        <button mix-put="/items/{{item['item_pk']}}" mix-data="#frm_item_{{item['item_pk']}}" mix-default="Save" mix-await="Updating item...">
            Save
        </button>

        <button mix-delete="/items/{{item['item_pk']}}" mix-default="Delete" mix-await="Deleting...">
            Delete
        </button>
    </form>
</div>

